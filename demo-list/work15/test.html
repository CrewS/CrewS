<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.1/css/sm.css">
    <!--<link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.6.1/css/sm-extend.css">-->
    <link rel="stylesheet" href="css/base.css">


    <title></title>
</head>
<body>
    <div class="page-group">
        <div class="page page-current">
            <header class="bar bar-nav">
                <a class="button button-link button-nav pull-left" href="/demos/card" data-transition='slide-out'>
                    <span class="icon icon-left"></span>
                    返回
                </a>
                <h1 class="title">我的生活</h1>
            </header>
            <nav class="bar bar-tab">
                <a class="tab-item active" href="#">
                    <span class="icon icon-home"></span>
                    <span class="tab-label">首页</span>
                </a>
                <a class="tab-item" href="#">
                    <span class="icon icon-me"></span>
                    <span class="tab-label">我</span>
                </a>
                <a class="tab-item" href="#">
                    <span class="icon icon-star"></span>
                    <span class="tab-label">收藏</span>
                </a>
                <a class="tab-item" href="#">
                    <span class="icon icon-settings"></span>
                    <span class="tab-label">设置</span>
                </a>
            </nav>
            <div class="content infinite-scroll infinite-scroll-bottom" data-distance="25">
                <!-- 这里是页面内容区 -->
                <div class="list-block media-list">
                    <a href="#" class="item-link item-content">
                        <div class="item-inner">
                            <div class="item-img-box">
                                <img src="img/test-item.jpg">
                            </div>
                            <div class="item-info">
                                <h1>美利达  REACTO 1300-CN</h1>
                                <p>中奖号：<span class="item-info-init">11571</span></p>
                                <p>中奖ID：贫嘴张大民</p>
                                <p>手机：135xxxx4567</p>
                                <p>期数：0001</p>
                            </div>
                        </div>
                    </a>
                    <a href="#" class="item-link item-content">
                        <div class="item-inner">
                            <div class="item-img-box">
                                <img src="img/test-item.jpg">
                            </div>
                            <div class="item-info">
                                <h1>美利达  REACTO 1300-CN</h1>
                                <p>中奖号：<span class="item-info-init">11571</span></p>
                                <p>中奖ID：贫嘴张大民</p>
                                <p>手机：135xxxx4567</p>
                                <p>期数：0001</p>
                            </div>
                        </div>
                    </a>
                    <a href="#" class="item-link item-content">
                        <div class="item-inner">
                            <div class="item-img-box">
                                <img src="img/test-item.jpg">
                            </div>
                            <div class="item-info">
                                <h1>美利达  REACTO 1300-CN</h1>
                                <p>中奖号：<span class="item-info-init">11571</span></p>
                                <p>中奖ID：贫嘴张大民</p>
                                <p>手机：135xxxx4567</p>
                                <p>期数：0001</p>
                            </div>
                        </div>
                    </a>
                    <a href="#" class="item-link item-content">
                        <div class="item-inner">
                            <div class="item-img-box">
                                <img src="img/test-item.jpg">
                            </div>
                            <div class="item-info">
                                <h1>美利达  REACTO 1300-CN</h1>
                                <p>中奖号：<span class="item-info-init">11571</span></p>
                                <p>中奖ID：贫嘴张大民</p>
                                <p>手机：135xxxx4567</p>
                                <p>期数：0001</p>
                            </div>
                        </div>
                    </a>
                    <a href="#" class="item-link item-content">
                        <div class="item-inner">
                            <div class="item-img-box">
                                <img src="img/test-item.jpg">
                            </div>
                            <div class="item-info">
                                <h1>美利达  REACTO 1300-CN</h1>
                                <p>中奖号：<span class="item-info-init">11571</span></p>
                                <p>中奖ID：贫嘴张大民</p>
                                <p>手机：135xxxx4567</p>
                                <p>期数：0001</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="infinite-scroll-preloader">
                    <div class="preloader"></div>
                </div>
            </div>
        </div>
    </div>
    <script type='text/javascript' src='//g.alicdn.com/sj/lib/zepto/zepto.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.1/js/sm.js' charset='utf-8'></script>

    <!--<script type='text/javascript' src='//g.alicdn.com/msui/sm/0.6.1/js/sm-extend.js' charset='utf-8'></script>-->
</body>
<script type="text/javascript">
    $(function(){
        // 加载flag
        //console.log('---')
        var loading = false;
        // 最多可加载的条目
        var maxItems = 30;

        // 每次加载添加多少条目
        var itemsPerLoad =6;

        function addItems(number, lastIndex) {
            // 生成新条目的HTML
            var html = '';
            for (var i = lastIndex + 1; i <= lastIndex + number; i++) {
                html += '<a href="#" class="item-link item-content"><div class="item-inner"><div class="item-img-box"> ' +
                         '<img src="img/test-item.jpg"></div><div class="item-info"><h1>美利达  REACTO 1300-CN</h1><p>中奖号：<span class="item-info-init">11571</span></p><p>中奖ID：贫嘴张大民</p><p>手机：135xxxx4567</p><p>期数：0001</p></div></div></a>';
            }
            // 添加新条目
            $('.infinite-scroll-bottom .list-block').append(html);

        }
        //预先加载20条
        //addItems(itemsPerLoad, 0);

        // 上次加载的序号

        var lastIndex = 20;

        // 注册'infinite'事件处理函数
        //alert(1111);
        $(document).on('infinite', '.infinite-scroll-bottom',function() {
            //console.log(2222)
            // 如果正在加载，则退出
            if (loading) return;

            // 设置flag
            loading = true;

            // 模拟1s的加载过程
            setTimeout(function() {
                // 重置加载flag
                loading = false;
                //console.log(11111)
                if (lastIndex >= maxItems) {
                    // 加载完毕，则注销无限加载事件，以防不必要的加载
                    $.detachInfiniteScroll($('.infinite-scroll'));
                    // 删除加载提示符
                    $('.infinite-scroll-preloader').remove();
                    return;
                }

                // 添加新条目
                addItems(itemsPerLoad, lastIndex);
                // 更新最后加载的序号
                lastIndex = $('.list-container li').length;
                //容器发生改变,如果是js滚动，需要刷新滚动
                $.refreshScroller();
            }, 1000);
        });
        $.init();
    })
</script>
</html>